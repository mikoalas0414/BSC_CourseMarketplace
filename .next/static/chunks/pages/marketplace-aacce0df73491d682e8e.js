(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[465],{35100:function(e,t,r){"use strict";r.d(t,{x:function(){return u},B:function(){return h}});var s=r(92809),n=r(38634),a=r(809),i=r.n(a),c=r(30266),l=r(89451);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){(0,s.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var u=15,m=function(){var e=(0,c.Z)(i().mark((function e(t){var r,s,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return s=e.sent,e.next=5,s.json();case 5:return n=e.sent,e.abrupt("return",null!==(r=n.market_data.current_price.usd)&&void 0!==r?r:null);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e,t=(0,l.ZP)("https://api.coingecko.com/api/v3/coins/binancecoin?localization=false&tickers=false&market_data=true&community_data=false&developer_data=false&sparkline=false",m,{refreshInterval:1e4}),r=t.data,s=(0,n.Z)(t,["data"]);return{eth:d({data:r,perItem:null!==(e=r&&(u/Number(r)).toFixed(6))&&void 0!==e?e:null},s)}}},67817:function(e,t,r){"use strict";r.d(t,{Y:function(){return m}});var s=r(85893),n=r(86669),a=r(32975),i=r(35100),c=r(25675);function l(){var e=(0,i.B)().eth;return(0,s.jsxs)("div",{className:"flex flex-col xs:flex-row text-center",children:[(0,s.jsxs)("div",{className:"p-6 border drop-shadow rounded-md mr-2",children:[(0,s.jsx)("div",{className:"flex items-center justify-center",children:e.data?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.default,{layout:"fixed",height:"30",width:"30",src:"/small-eth.webp",style:{Position:"relative",marginLeft:"50px"}}),(0,s.jsxs)("span",{className:"text-xl font-bold",style:{color:"white"},children:["= ",e.data,"$"]})]}):(0,s.jsx)("div",{className:"w-full flex justify-center",children:(0,s.jsx)(a.aN,{size:"md"})})}),(0,s.jsx)("p",{className:"text-lg ",style:{color:"white"},children:"Current BNB Price"})]}),(0,s.jsxs)("div",{className:"p-6 border drop-shadow rounded-md",children:[(0,s.jsx)("div",{className:"flex items-center justify-center",children:e.data?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"text-xl font-bold",style:{color:"white"},children:e.perItem}),(0,s.jsx)(c.default,{layout:"fixed",height:"30",width:"30",src:"/small-eth.webp"}),(0,s.jsxs)("span",{className:"text-xl font-bold",style:{color:"white"},children:["= ",i.x,"$"]})]}):(0,s.jsx)("div",{className:"w-full flex justify-center",style:{color:"white"},children:(0,s.jsx)(a.aN,{size:"md"})})}),(0,s.jsx)("p",{className:"text-lg text-white-500",style:{color:"white"},children:"Price por curso"})]})]})}var o=r(23009);function d(){var e=(0,o.$)().requireInstall,t=(0,n.vL)(),r=t.account,i=t.network;return(0,s.jsx)("section",{className:"text-white bg-green-600 rounded-lg",children:(0,s.jsxs)("div",{className:"p-8",children:[(0,s.jsxs)("h1",{className:"text-base xs:text-xl break-words",children:["Hello, ",r.data]}),(0,s.jsx)("h2",{className:"subtitle mb-5 text-sm xs:text-base",children:"I hope you are having a great day!"}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("div",{className:"sm:flex sm:justify-center lg:justify-start",children:(0,s.jsx)(a.zx,{className:"mr-2 text-sm xs:text-lg p-2",variant:"white",children:"Learn how to purchase"})}),(0,s.jsxs)("div",{children:[i.hasInitialResponse&&!i.isSupported&&(0,s.jsxs)("div",{className:"bg-red-400 p-4 rounded-lg",children:[(0,s.jsx)("div",{children:"Connected to wrong network"}),(0,s.jsxs)("div",{children:["Connect to: "," ",(0,s.jsx)("strong",{className:"text-2xl",children:i.target})]})]}),e&&(0,s.jsx)("div",{className:"bg-yellow-500 p-4 rounded-lg",children:"Cannot connect to network. Please install Metamask."}),i.data&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{children:"Currently on "}),(0,s.jsx)("strong",{className:"text-2xl",children:i.data})]})]})]})]})})}var u=[{href:"/marketplace",value:"Buy"},{href:"/marketplace/courses/owned",value:"My Courses"},{href:"/marketplace/courses/managed",value:"Manage Courses",requireAdmin:!0}];function m(){var e=(0,n.mA)().account;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"pt-4",children:(0,s.jsx)(d,{})}),(0,s.jsx)(l,{}),(0,s.jsx)("div",{className:"flex flex-row-reverse p-4 sm:px-6 lg:px-8",children:(0,s.jsx)(a.Oo,{isAdmin:e.isAdmin,items:u})})]})}},15722:function(e,t,r){"use strict";r.r(t),r.d(t,{__N_SSG:function(){return C},default:function(){return S}});var s=r(85893),n=r(92809),a=r(56586);var i=r(16988);function c(e){return function(e){if(Array.isArray(e))return(0,a.Z)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||(0,i.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var l=r(809),o=r.n(l),d=r(30266),u=r(90492),m=r(1935),h=r(86669),x=r(32975),f=r(35100),p=r(67294);function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var b={price:"",email:"",confirmationEmail:""},g=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return{isDisabled:e,message:t}};function w(e){var t=e.course,r=e.onClose,n=e.onSubmit,a=e.isNewPurchase,i=(0,p.useState)(!1),c=i[0],l=i[1],o=(0,p.useState)(b),d=o[0],u=o[1],m=(0,p.useState)(!1),h=m[0],v=m[1],w=(0,p.useState)(!1),y=w[0],N=w[1],O=(0,f.B)().eth;(0,p.useEffect)((function(){t&&(l(!0),u(j(j({},b),{},{price:O.perItem})))}),[t]);var k=function(e,t,r){var s=e.price,n=e.email,a=e.confirmationEmail;if(!s||Number(s)<=0)return g(!0,"Price is not valid.");if(r){if(0===a.length||0===n.length)return g(!0);if(n!==a)return g(!0,"Email are not matching.")}return t?g():g(!0,"You need to agree with terms of service in order to submit the form")}(d,y,a);return(0,s.jsx)(x.u_,{isOpen:c,children:(0,s.jsxs)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[(0,s.jsx)("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:(0,s.jsx)("div",{className:"sm:flex sm:items-start",children:(0,s.jsxs)("div",{className:"mt-3 sm:mt-0 sm:ml-4 sm:text-left",children:[(0,s.jsx)("h3",{className:"mb-7 text-lg font-bold leading-6 text-white-900",id:"modal-title",children:t.title}),(0,s.jsxs)("div",{className:"mt-1 relative rounded-md",children:[(0,s.jsxs)("div",{className:"mb-1",children:[(0,s.jsx)("label",{className:"mb-2 font-bold",children:"Price(BNB)"}),(0,s.jsxs)("div",{className:"text-xs text-white-700 flex",children:[(0,s.jsx)("label",{className:"flex items-center mr-2",children:(0,s.jsx)("input",{checked:h,onChange:function(e){var t=e.target.checked;u(j(j({},d),{},{price:t?d.price:O.perItem})),v(t)},type:"checkbox",className:"form-checkbox"})}),(0,s.jsx)("span",{children:"Adjust Price - only when the price is not correct"})]})]}),(0,s.jsx)("input",{disabled:!h,value:d.price,onChange:function(e){var t=e.target.value;isNaN(t)||u(j(j({},d),{},{price:t}))},type:"text",name:"price",id:"price",className:"disabled:opacity-50 w-80 mb-1 focus:ring-green-500 shadow-md focus:border-green-500 block pl-7 p-4 sm:text-sm border-white-300 rounded-md"}),(0,s.jsx)("p",{className:"text-xs text-white-700",children:"Price will be verified at the time of the order. If the price will be lower, order can be declined (+- 2% slipage is allowed)"})]}),a&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"mt-2 relative rounded-md",children:[(0,s.jsx)("div",{className:"mb-1",children:(0,s.jsx)("label",{className:"mb-2 font-bold",children:"Email"})}),(0,s.jsx)("input",{onChange:function(e){var t=e.target.value;u(j(j({},d),{},{email:t.trim()}))},type:"email",name:"email",id:"email",className:"w-80 focus:ring-green-500 shadow-md focus:border-green-500 block pl-7 p-4 sm:text-sm border-white-300 rounded-md",placeholder:"x@y.com"}),(0,s.jsx)("p",{className:"text-xs text-white-700 mt-1",children:"It's important to fill a correct email, otherwise the order cannot be verified. We are not storing your email anywhere"})]}),(0,s.jsxs)("div",{className:"my-2 relative rounded-md",children:[(0,s.jsx)("div",{className:"mb-1",children:(0,s.jsx)("label",{className:"mb-2 font-bold",children:"Repeat Email"})}),(0,s.jsx)("input",{onChange:function(e){var t=e.target.value;u(j(j({},d),{},{confirmationEmail:t.trim()}))},type:"email",name:"confirmationEmail",id:"confirmationEmail",className:"w-80 focus:ring-green-500 shadow-md focus:border-green-500 block pl-7 p-4 sm:text-sm border-white-300 rounded-md",placeholder:"x@y.com"})]})]}),(0,s.jsxs)("div",{className:"text-xs text-white-700 flex mt-5",children:[(0,s.jsx)("label",{className:"flex items-center mr-2",children:(0,s.jsx)("input",{checked:y,onChange:function(e){var t=e.target.checked;N(t)},type:"checkbox",className:"form-checkbox"})}),(0,s.jsx)("span",{children:"I accept Eincode 'terms of service' and I agree that my order can be rejected in the case data provided above are not correct"})]}),k.message&&(0,s.jsx)("div",{className:"p-4 my-3 text-yellow-700 bg-yellow-200 rounded-lg text-sm",children:k.message})]})})}),(0,s.jsxs)("div",{className:"bg-white-50 px-4 py-3 sm:px-6 sm:flex",children:[(0,s.jsx)(x.zx,{disabled:k.isDisabled,onClick:function(){n(d,t)},children:"Submit"}),(0,s.jsx)(x.zx,{onClick:function(){l(!1),u(b),v(!1),N(!1),r()},variant:"red",children:"Cancel"})]})]})})}var y=r(67817),N=r(23009),O=r(73075);function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var C=!0;function S(e){var t=e.courses,r=(0,N.$)(),n=r.web3,a=r.contract,i=r.requireInstall,l=(0,h.vL)(),m=l.hasConnectedWallet,f=l.isConnecting,v=l.account,j=(0,h.Ce)(t,v.data).ownedCourses,b=(0,p.useState)(null),g=b[0],k=b[1],C=(0,p.useState)(null),S=C[0],E=C[1],I=(0,p.useState)(!0),_=I[0],z=I[1],D=function(){var e=(0,d.Z)(o().mark((function e(t,r){var s,a,i,c,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=n.utils.utf8ToHex(r.id),a=n.utils.soliditySha3({type:"bytes16",value:s},{type:"address",value:v.data}),i=n.utils.toWei(String(t.price)),E(r.id),_?(c=n.utils.sha3(t.email),l=n.utils.soliditySha3({type:"bytes32",value:c},{type:"bytes32",value:a}),(0,O.f)(Z({hexCourseId:s,proof:l,value:i},r))):(0,O.f)(A({courseHash:a,value:i},r));case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),Z=function(){var e=(0,d.Z)(o().mark((function e(t,r){var s,n,i,l;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.hexCourseId,n=t.proof,i=t.value,e.prev=1,e.next=4,a.methods.purchaseCourse(s,n).send({from:v.data,value:i});case 4:return l=e.sent,j.mutate([].concat(c(j.data),[P(P({},r),{},{proof:n,state:"purchased",owner:v.data,price:i})])),e.abrupt("return",l);case 9:throw e.prev=9,e.t0=e.catch(1),new Error(e.t0.message);case 12:return e.prev=12,E(null),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,9,12,15]])})));return function(t,r){return e.apply(this,arguments)}}(),A=function(){var e=(0,d.Z)(o().mark((function e(t,r){var s,n,i,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.courseHash,n=t.value,e.prev=1,e.next=4,a.methods.repurchaseCourse(s).send({from:v.data,value:n});case 4:return i=e.sent,(c=j.data.findIndex((function(e){return e.id===r.id})))>=0?(j.data[c].state="purchased",j.mutate(j.data)):j.mutate(),e.abrupt("return",i);case 10:throw e.prev=10,e.t0=e.catch(1),new Error(e.t0.message);case 13:return e.prev=13,E(null),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,10,13,16]])})));return function(t,r){return e.apply(this,arguments)}}(),B=function(){k(null),z(!0)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(y.Y,{}),(0,s.jsx)(u.cQ,{courses:t,children:function(e){var t=j.lookup[e.id];return(0,s.jsx)(u.Pg,{course:e,state:null===t||void 0===t?void 0:t.state,disabled:!m,Footer:function(){if(i)return(0,s.jsx)(x.zx,{size:"sm",disabled:!0,variant:"lightPurple",children:"Install"});if(f)return(0,s.jsx)(x.zx,{size:"sm",disabled:!0,variant:"lightPurple",children:(0,s.jsx)(x.aN,{size:"sm"})});if(!j.hasInitialResponse)return(0,s.jsx)(x.zx,{variant:"white",disabled:!0,size:"sm",children:m?"Loading State...":"Connect"});var r=S===e.id;return t?(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)(x.zx,{onClick:function(){return alert("You are owner of this course.")},disabled:!1,size:"sm",variant:"white",children:"Yours \u2714"}),"deactivated"===t.state&&(0,s.jsx)("div",{className:"ml-1",children:(0,s.jsx)(x.zx,{size:"sm",disabled:r,onClick:function(){z(!1),k(e)},variant:"purple",children:r?(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)(x.aN,{size:"sm"}),(0,s.jsx)("div",{className:"ml-2",children:"In Progress"})]}):(0,s.jsx)("div",{children:"Fund to Activate"})})})]})}):(0,s.jsx)(x.zx,{onClick:function(){return k(e)},size:"sm",disabled:!m||r,variant:"lightPurple",children:r?(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)(x.aN,{size:"sm"}),(0,s.jsx)("div",{className:"ml-2",children:"In Progress"})]}):(0,s.jsx)("div",{children:"Purchase"})})}},e.id)}}),g&&(0,s.jsx)(w,{course:g,isNewPurchase:_,onSubmit:function(e,t){D(e,t),B()},onClose:B})]})}S.Layout=m.I},73075:function(e,t,r){"use strict";r.d(t,{f:function(){return a}});var s=r(85893),n=r(39249),a=function(e){n.Am.promise(e,{pending:{render:function(){return(0,s.jsxs)("div",{className:"p-6 py-2",children:[(0,s.jsx)("p",{className:"mb-2",children:"Your transaction is being processed."}),(0,s.jsx)("p",{children:"Hang tight... Just few more moments."})]})},icon:!1},success:{render:function(e){var t=e.data;return(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"font-bold",children:["Tx: ",t.transactionHash.slice(0,20),"..."]}),(0,s.jsx)("p",{children:"Has been succesfuly processed."}),(0,s.jsx)("a",{href:"https://ropsten.etherscan.io/tx/".concat(t.transactionHash),target:"_blank",children:(0,s.jsx)("i",{className:"text-green-600 underline",children:"See Tx Details"})})]})},icon:"\ud83d\udfe2"},error:{render:function(e){var t,r=e.data;return(0,s.jsx)("div",{children:null!==(t=r.message)&&void 0!==t?t:"Transaction has failed"})}}},{closeButton:!0})}},54563:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/marketplace",function(){return r(15722)}])}},function(e){e.O(0,[774,482,367,819,888,179],(function(){return t=54563,e(e.s=t);var t}));var t=e.O();_N_E=t}]);